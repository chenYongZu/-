<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>博客系统用户信息</title>
    <link type="text/css" rel="stylesheet" href="../CSS/userInfo.css" />
    <script src="../js/jquery-3.3.1.min.js"></script>
</head>

<body>
<script>
    $(document).ready(function () {
        $.post("../php/userInfo.php",{

        },function(data){
            var res = data.split("<br>");
            $("#user").val(res[0]);
            $("#email").val(res[1]);
            $("#age").val(res[3]);
            $("#rank").val(res[4]);
            $("#reg_time").val(res[5]);
            if(res[2]==='男') {
                console.log("男");
                $("#sex").val("1");
                $("#sex").find("option[value='1']").attr("selected",true);
            }
            else{
                console.log("女");
                $("#sex").val("2");
                $("#sex").find("option[value='2']").attr("selected",true);
            }
        });
    })
</script>

<div class = "cyz_userinfobox">
    <div class = "box">
        <div class = "container">
            <div class = "userinfo_tip">
                个人信息
            </div>
            <div class = "userinfo_form">
                <div class = "userbox">
                      <label for = "user">用户名：</label>
                    <input type = "text" name = "user" id = "user" disabled="disabled" />
                </div>
                <div class = "emailbox">
                    <label for = "email">电子邮箱：</label>
                    <input type = "text" name = "email" id = "email" disabled="disabled"/>
                </div>
                <div class = "agebox">
                    <label for = "age">年龄：</label>
                    <input type = "text" name = "age" id = "age"/>
                </div>
                <div class = "rankbox">
                    <label for = "rank">等级：</label>
                    <input type = "text" name = "rank" id = "rank" disabled="disabled"/>
                </div>
                <div class = "reg_timebox">
                    <label for = "reg_time">注册时间:</label>
                    <input type = "text" name = "reg_time" id = "reg_time" disabled="disabled"/>
                </div>
                <div class = "sexbox">
                    <label for="sex">性别：</label>
                    <select name="sex" id="sex">
                        <option value="1">男</option>
                        <option value="2">女</option>
                    </select>
                </div>
                <div class = "submitbox">
                    <button id="submit" name="submit">保存修改</button>
                </div>
                <div class = "forget-register">
                    <a href="homepage.html" class = "register">返回主页</a>
                </div>
            </div>
        </div>
    </div>
</div>
    <script type="text/javascript">
        $(function(){
            $("#submit").on("click",function(){
                var user = $("#user").val();
                var age = $("#age").val();
                var sex = $("#sex").val();
                $.post("../php/updateUserInfo.php",{
                    "user":user,
                    "age":age,
                    "sex":sex
                },function(data){
                    if(data==="Yes"){
                        location = "homepage.html";
                    }
                });

            });
        });
    </script>
</body>



</html>